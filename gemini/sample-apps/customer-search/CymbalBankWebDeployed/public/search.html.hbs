<!DOCTYPE html>

<html>

<head>
    <link rel="stylesheet" href="style/style.css" />
    <title>Search Results</title>
    <script defer type="module" src="scripts/script.js"></script>
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://www.gstatic.com/dialogflow-console/fast/df-messenger/prod/v1/df-messenger.js"></script>
    <style>
        df-messenger {
            z-index: 999;
            position: fixed;
            bottom: 16px;
            right: 16px;
            --df-messenger-primary-color: #4bbb7d;
            --df-messenger-chat-window-height: 55vh;
            --df-messenger-chat-window-width: 50vw;
        }
    </style>
    <script>
        window.addEventListener('df-messenger-loaded', function (event) {
            // Get the Dialogflow Messenger instance
            console.log('dfMessengerLoaded');

            const dfMessenger = document.querySelector('df-messenger');
            dfMessenger.clearStorage();
        });
    </script>
    <style>
        .header {
            padding: 0 3rem;
            height: 10rem;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Safari */
        @-webkit-keyframes spin {
            0% {
                -webkit-transform: rotate(0deg);
            }

            100% {
                -webkit-transform: rotate(360deg);
            }
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        body {
            margin: 0;
            background-color: transparent;
            font-family: 'Roboto', sans-serif;
            overflow: hidden;
        }

        #search-icon {
            padding: 0px;
            height: 25px;
            cursor: pointer;
            background-color: transparent;
        }

        #clear-icon {
            visibility: hidden;
        }


        #search-container {
            position: absolute;
            top: 77px;
            /* Adjust as needed for spacing from the top */
            left: 50%;
            transform: translateX(-50%);
            margin: 0;
            padding: 20px;
            /* Adjust as needed for padding */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1;
            /* Set a high z-index to ensure it appears above other content */
            width: 100%;
            /* Ensure it spans the full width of the viewport */
            box-sizing: border-box;
            /* Include padding and border in width calculation */
        }


        #search-query {
            width: 70%;
            min-width: 280px;
            /* Adjust the min-width as needed */
            max-width: 720px;
            margin: 0 auto;
            overflow: hidden;
            border: 1px solid #dfe1e5;
            /* Light border color similar to Google */
            border-radius: 24px;
            /* Larger border-radius for rounded corners */
            background-color: #f1f3f4;
            /* Light gray background similar to Google */
            padding: 10px;
            /* Adjust padding as needed */
            box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.1);
            /* Box shadow for a subtle lift */
            font-size: 16px;
            line-height: 24px;
            display: flex;
            /* Make it a flex container */
        }

        #search-query-input {

            min-width: 104px;
            width: 90%;
            height: 24px;
            font-size: 16px;
            font-stretch: normal;
            letter-spacing: normal;
            line-height: 24px;
            border: 0;
            color: #000;
            background-color: transparent;
            cursor: text;

            text-align: start;
            vertical-align: middle;
        }

        #search-query-input:focus {
            outline: none;
        }

        @media all and (max-width: 480px) {

            #search-query {
                min-width: 200px;
                width: 100%;
            }

        }

        .search-result-list {
            list-style: none;
            padding: 18px;
            margin-bottom: 10px;
            border: 1px solid #f3f3f3;
            border-radius: 5px;
            list-style-type: none;
            background-color: #f3f3f3;
        }

        .search-result {
            margin-bottom: 10px;
            padding: 17px;
            border: 1px solid #f3f3f3;
            border-radius: 5px;
            list-style-type: none;
            background-color: #f3f3f3;
        }

        .search-result-title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .search-result-snippet {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 0;
        }

        .search-result-url {
            color: #007bff;
        }

        .slide-container {
            margin: 0 auto;
        }

        .half-width {
            width: 50vw;
            min-width: 480px;
            max-width: 720px;
            margin: 0 auto;
        }

        .search-result-list {
            list-style: none;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ffffff;
            border-radius: 0px;
            list-style-type: none;
            background: #ffffff;
            backdrop-filter: saturate(180%) blur(10px);
            /* background-color: #88ca98; */
            box-shadow: 5px 5px 10px 0px rgba(0, 0, 0, 0.2);
            font-size: 13.5px;
            overflow: hidden;
        }

        #search-result {
            margin-bottom: 10px;
            padding: 18px;
            border: 1px solid #ffffff;
            border-radius: 0px;
            list-style-type: none;
            /* background-color: #88ca98; */
            background: #ffffff;
            backdrop-filter: saturate(120%) blur(10px);
            box-shadow: 5px 5px 10px 0px rgba(0, 0, 0, 0.2);
            /* font-family: 'Roboto', sans-serif; */
            font-size: 15px;
            /* Adjust as needed */
            line-height: 1.5;
            overflow: hidden;
        }


        .search-result-title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .search-result-snippet {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 0;
        }

        .search-result-url {
            color: #007bff;
            text-decoration: none;
        }

        .search-result-url:hover {
            text-decoration: underline;
        }

        .slide-container {
            margin: 0 auto;
        }

        .half-width {
            width: 50vw;
            min-width: 480px;
            max-width: 720px;
            margin: 0 auto;
        }

        body {
            /* Set the background image */
            /* background: url('your-image-url.jpg') no-repeat center center fixed; */
            /* Adjust background size and other properties as needed */
            background-size: cover;
            /* Specify background color in case the image is not available or not fully covered */
            /* background-color: #dedede; */
            font-family: 'Poppins', sans-serif;
            font-weight: 300;
            /* color: #444; */
            line-height: 1.9;
            background-color: #f3f3f3;
        }


        #loader {
            display: none;
            position: fixed;
            top: 30%;
            left: 50%;
            -webkit-transform: translate(-50%, -50%);
            transform: translate(-50%, -50%);
            border: 10px solid #232323;
            border-radius: 10%;
            border-top: 10px solid #7ec379;
            width: 40px;
            height: 40px;
            -webkit-animation: spin 1s linear infinite;
            /* Safari */
            animation: spin 1s linear infinite;
            z-index: 999;
        }

        html {
            overflow-y: scroll;
        }
    </style>

    <base target="_blank">

    <script type="text/javascript">

        function submitSearch() {
            document.getElementById('loader').style.display = 'block';

            var siteSearchUrl = 'https://sites.google.com/corp/search/pranshusingh.altostrat.com/cymbalbank?query=';

            var query = document.getElementById("search-query-input").value;

            const uri = '{{rag_qa_chain_url_translate}}';
            const body = JSON.stringify({ query: query })
            const initDetails = {
                method: 'POST',
                mode: 'cors',
                headers: {
                    "Content-Type": "application/json"
                },
                referrerPolicy: "strict-origin-when-cross-origin",
                body: body
            }

            fetch(uri, initDetails)
                .then(response => {
                    if (response.status !== 200) {
                        console.log('Looks like there was a problem. Status Code: ' +
                            response.status);
                        return;
                    }
                    console.log(response.headers.get("Content-Type"));
                    return response.json();
                }
                )
                .then(myJson => {
                    console.log(JSON.stringify(myJson));
                    var obj = JSON.parse(JSON.stringify(myJson));


                    references = JSON.parse(obj.fulfillment_response.messages[0].text.text[1]);
                    console.log(references)
                    var str = '';
                    var i = 0;
                    var count = 0

                    references.forEach(function (reference) {
                        var s = reference.page_content
                        if (!/^[a-zA-Z]+$/.test(s[0])) {
                            s = s.slice(1);
                        }
                        count++;
                        str += '<li class="search-result-list">';
                        str += '<h3 class="search-result-title">' + reference.document_name + '</h3>';
                        str += '<a href="' + reference.document_source + '" class="search-result-url">' + reference.document_source + '</a>';
                        str += '<p class="search-result-snippet">' + s + '</p>';
                        str += '</li>';
                    });
                    document.getElementById('search-result').innerHTML = '<p>' + obj.fulfillment_response.messages[0].text.text[0] + '</p>';
                    document.getElementById("slide-container").innerHTML = str;
                })
                .catch(err => {
                    console.log('Fetch Error :-S', err);
                })
                .finally(() => {
                    // Hide loading symbol
                    document.getElementById('loader').style.display = 'none';
                });;

        }


        function searchKeyPress(e) {

            // look for window.event in case event isn't passed in

            e = e || window.event;

            if (e.keyCode == 13) {

                document.getElementById('search-icon').click();

                return false;

            }

            return true;

        }



    </script>

    <link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet">

</head>

<body background="">
    <df-messenger location="us-central1" project-id="{{project_id}}"
            agent-id="{{df_agent_id}}" language-code="en">
            <df-messenger-chat-bubble chat-title="CymBuddy">
            </df-messenger-chat-bubble>
        </df-messenger>
    </div>
    <header class="header">
        <nav>
            <div class="navbar">
                <i class='bx bx-menu'></i>
                <div class="sidebar-logo-container">
                <a href="/" target="_self"> <img src="assets/cymbal_logo.png" alt="Cymbal Bank logo" class="nav-logo"
                        id="logo" data-version-number="3.0" /></a>
                </div>
                <div class="nav-links">
                    <div class="sidebar-logo">
                        <span class="logo-name">Cymbal Bank</span>
                        <i class='bx bx-x'></i>
                    </div>
                    <ul class="links">
                        <li class="nav-item">
                            <a class="nav-link">Pay</a>
                            <i class='bx bxs-chevron-down pay-arrow arrow'></i>
                            <ul class="pay-sub-menu sub-menu">
                                <li class="moneytransfer">
                                    <span><a class="nav-link" href="#">Money Transfer</a>
                                        <i class='bx bxs-chevron-right arrow moneytransfer-arrow'></i>
                                    </span>
                                    <ul class="moneytransfer-sub-menu sub-menu">
                                        <li><a class="nav-link" href="/upi">UPI</a></li>
                                        <li><a class="nav-link" href="/imps">IMPS</a></li>
                                        <li><a class="nav-link" href="/neft">NEFT</a></li>
                                    </ul>
                                </li>
                                <li class="bills">
                                    <span><a class="nav-link" href="#">Bills</a>
                                        <i class='bx bxs-chevron-right arrow bills-arrow'></i>
                                    </span>
                                    <ul class="bills-sub-menu sub-menu">
                                        <li><a class="nav-link" href="/recharge">Recharge (Mobile, DTH, Broadband)</a>
                                        </li>
                                        <li><a class="nav-link" href="/electricity">Electricity</a></li>
                                        <li><a class="nav-link" href="/insurance_premium">Insurance Premium</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link">Save</a>
                            <i class='bx bxs-chevron-down save-arrow arrow'></i>
                            <ul class="save-sub-menu sub-menu">
                                <li class="accounts">
                                    <span><a class="nav-link" href="#">Accounts</a>
                                        <i class='bx bxs-chevron-right arrow accounts-arrow'></i>
                                    </span>
                                    <ul class="accounts-sub-menu sub-menu">
                                        <li><a class="nav-link" href="/saving">Saving</a></li>
                                        <li><a class="nav-link" href="/current">Current</a></li>
                                        <li><a class="nav-link" href="/salary">Salary</a></li>
                                    </ul>
                                </li>
                                <li class="deposits">
                                    <span><a class="nav-link" href="#">Deposits</a>
                                        <i class='bx bxs-chevron-right arrow deposits-arrow'></i>
                                    </span>
                                    <ul class="deposits-sub-menu sub-menu">
                                        <li><a class="nav-link" href="/fixed_deposit">Fixed Deposit</a></li>
                                        <li><a class="nav-link" href="/recurring_deposit">Recurring Deposit</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/credit_card">Credit Card</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link">Invest</a>
                            <i class='bx bxs-chevron-down invest-arrow arrow'></i>
                            <ul class="invest-sub-menu sub-menu">
                                <li class="nav-item"><a class="nav-link" href="/stocks">Equities and Derivatives</a>
                                </li>
                                <li class="nav-item"><a class="nav-link" href="/ipo">IPO through ASBA</a></li>
                                <li class="nav-item"><a class="nav-link" href="/mutual_funds">Mutual Funds</a></li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/loans">Loans</a>
                            <i class='bx bxs-chevron-down borrow-arrow arrow'></i>
                            <ul class="borrow-sub-menu sub-menu">
                                <li><a class="nav-link" href="loans">Car Loan</a></li>
                                <li><a class="nav-link" href="loans">Two Wheeler Loan</a></li>
                                <li><a class="nav-link" href="loans">Personal Loan</a></li>
                                <li><a class="nav-link" href="loans">Fixed Deposit Overdraft</a></li>
                                <li><a class="nav-link" href="loans">Overdraft Against Securities</a></li>
                                <li><a class="nav-link" href="loans">Home Loan</a></li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link nav-link-btn btn--show-modal" id="login_menu_btn">Login</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link nav-link-btn btn--show-modal" id="logout_menu_btn"
                                style="display: none">Logout</a>
                        </li>
                    </ul>
                </div>
            </div>
            </div>
        </nav>
    </header>

    <div id="search-query">

        <img id="search-icon" alt="Search" onclick="submitSearch();"
            src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAADAklEQVR4AezZA6xcQRSA4b92g9q2/VRuw9puVLcxake13Zh1G9W2bds2T42ZzNPeO7Pb5H5/zD17PUMgEAgEAoFAIGxFGMRMlrGTi7zjFZfZwTJmMohCRLkajOMYkkRHGUdNolI8B5EUdpB4okpJViOpbDXFiArpGMcHJIzeMY50RFgB9iIe2ksBIiiGR4jHHhFDhHTlI+JDH+lKBMQmceY/YhZNqExBMn+rAJUIMZMnCOY+EItjxRP9OetoTQZMMtCadYixJ5TAoQyYH1cbiCE5CWxADB0jA85MNp7JHUipnsbTbwqO1OWL4RSIIzUSDKfgF+riQBrOIFrPKENqleEZonWGNFjX0vDPNSUcTQ1HsiXWbUO0hhOu4YjWViwri2gdwYvDiFZ5rJqIaMXgRRyiNRGr7iBKa/BqDaJ0G4vKIVqN8Kqxy5OoL6L0mDR4lUZ/o2UA1sxHlBbhh8WI0jys2Y4odcUPXRCl7VhzDVFqgB8aIErXsUZ/fylr5dnyGGv0R38O/JADUfqMNfpLcHb8kF1/Mf/fT6HnWHMdUWqIHxoiSjexZiui1A0/dEWUtmHNPERpsZUH2WJ3rxKPSIdX6XiMKPXGmvKIVgivQohWJSx6YP11+g5WTUK04vAiBtGaBeDyJDqMF0cQrVpYthnRGkq4hiJau7GuhW/LKiHDskpzrEvDKV8WtkobFrZ24UQ9H5YW44xLi7VwZIpxcbcbKdXNuDUyG2cychQxtJ4YkhPPOsTQJXLiUMmwNjhasQUx9obyOBafzBZTiMoUIguZKUhlQszSRtYHaI5z+pnsT6NxKI5HiMee8xlRGoJDhdiNeOg6ZWmNRHKEdIzlXZj7w/PIDYBEdgQoxmokla2nNL9J5EeAeI4iKWwPXfiXRMcIUJPxHEOS6CTDKYVuTGRH0BViEDNZyk4u8gpBeMMuJtKegujcj2DN1/bnmAgAEIBhIJIZGZHOWAEslPsoyCMgIHxPmAgICAjXIQRQSsh+JSH7vYQ1StvZryW8vy9JkiQdHsFQT60Y7OcAAAAASUVORK5CYII=">

        <input type="text" id="search-query-input" placeholder="Search this site"
            onkeypress="return searchKeyPress(event);" style="box-shadow:none" ;>

    </div>
    <br>
    <br>



    <div id="loader"></div>
    <div class="half-width">
        <div id="search-result"></div>

        <div id="slide-container"></div>
        <script>
            // Retrieve search results from sessionStorage
            var storedResults = JSON.parse(sessionStorage.getItem('temp_result'));
            // print(storedResults)

            if (storedResults) {
                console.log(storedResults);

                var txt = storedResults.fulfillment_response.messages[0].text.text[0];
                document.getElementById('search-result').innerHTML = txt;
                references = JSON.parse(storedResults.fulfillment_response.messages[0].text.text[1]);
                console.log(references);
                // Display search results on the page
                var str = '';
                var count = 0;

                references.forEach(function (reference) {
                    var s = reference.page_content
                    if (!/^[a-zA-Z]+$/.test(s[0])) {
                        s = s.slice(1);
                    }
                    count++;
                    str += '<li class="search-result-list">';
                    str += '<h3 class="search-result-title">' + reference.document_name + '</h3>';
                    str += '<a href="' + reference.document_source + '" class="search-result-url">' + reference.document_source + '</a>';
                    str += '<p class="search-result-snippet">' + s + '</p>';
                    str += '</li>';

                });
                console.log(str);
                // document.getElementById('search-result').innerHTML = '<h2>Search Results</h2>';
                document.getElementById('slide-container').innerHTML = str;
                // document.getElementById('search-result').innerHTML += '<p>Showing ' + count + ' results</p>';
            } else {
                // Handle the case when there are no search results
                // document.getElementById('search-result').innerHTML = '<p>No search results found.</p>';
            }
        </script>
    </div>

    <section class="section section-sign-up">
        <div class="section-title">
            <h3 class="section-header">
                The best day to join Cymbal Bank was one year ago. The second
                best is today!
            </h3>
        </div>
        <button class="btn btn--show-modal">
            Open your free account today!
        </button>
    </section>

    <footer class="footer">
        <ul class="footer-nav">
            <li class="footer-item">
                <a class="footer-link" href="#">About</a>
            </li>
            <li class="footer-item">
                <a class="footer-link" href="#">Pricing</a>
            </li>
            <li class="footer-item">
                <a class="footer-link" href="#">Terms of Use</a>
            </li>
            <li class="footer-item">
                <a class="footer-link" href="#">Privacy Policy</a>
            </li>
            <li class="footer-item">
                <a class="footer-link" href="#">Careers</a>
            </li>
            <li class="footer-item">
                <a class="footer-link" href="#">Blog</a>
            </li>
            <li class="footer-item">
                <a class="footer-link" href="#">Contact Us</a>
            </li>
        </ul>
        <img src="assets/cymbal_logo.png" alt="Logo" class="footer-logo" />
    </footer>

    <div class="modal hidden">
        <button class="btn-close-modal">&times;</button>
        <div class="authenticate">
            <div class="authenticate-tab-container">
                <button class="btn authenticate-tab authenticate-tab-1 authenticate-tab-active" data-tab="1">
                    LOGIN
                </button>
                <button class="btn authenticate-tab authenticate-tab--2" data-tab="2">
                    CREATE ACCOUNT
                </button>
            </div>
            <div class="authenticate-content authenticate-content--1 authenticate-content-active">
                <form class="modal-form" id="sigin_form">
                    <label>Email Address</label>
                    <input type="email" />
                    <label>Password</label>
                    <input type="password" />
                    <button class="btn" id="signin_btn">Login</button>
                </form>
            </div>

            <div class="authenticate-content authenticate-content--2">
                <form class="modal-form" id="signup_form">
                    <label>First Name</label>
                    <input type="text" />
                    <label>Last Name</label>
                    <input type="text" />
                    <label>Aadhar</label>
                    <input type="text" />
                    <label>PAN</label>
                    <input type="text" />
                    <label>Email Address</label>
                    <input type="email" />
                    <label>Password</label>
                    <input type="password" />
                    <button class="btn" id="signup_btn">Create Account</button>
                </form>
            </div>
        </div>
    </div>
    <div class="overlay hidden"></div>

</body>

</html>